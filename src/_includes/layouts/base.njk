<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ title }} â€” Brain Bugs</title>
  <meta name="description" content="{{ description or 'Explore the hidden psychological traps, biases, and syndromes that hijack your thinking.' }}">
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:ital,wght@0,300;0,400;0,500;0,700;1,400&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css">
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
</head>
<body>

<!-- NAV -->
<nav id="navbar">
  <a href="/" class="nav-logo">
    <span class="bug-icon">ðŸ§ </span>
    Brain Bugs
  </a>
  <ul class="nav-links" id="navLinks">
    <li><a href="/#articles">Articles</a></li>
    <li><a href="/#index">The Index</a></li>
    <li><a href="/#about">About</a></li>
    <li><a href="/#newsletter">Subscribe</a></li>
  </ul>
  <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Toggle menu">
    <span></span><span></span><span></span>
  </button>
</nav>

{{ content | safe }}

<!-- FOOTER -->
<footer>
  <div class="footer-left">
    <span>ðŸ§ </span> Brain Bugs Â© 2025
  </div>
  <div class="footer-right">
    <a href="#">Twitter/X</a>
    <a href="#">YouTube</a>
    <a href="#">LinkedIn</a>
  </div>
</footer>

<script>
  // Nav scroll
  const navbar = document.getElementById('navbar');
  window.addEventListener('scroll', () => {
    navbar.classList.toggle('scrolled', window.scrollY > 50);
  });

  // Mobile menu
  const mobileMenuBtn = document.getElementById('mobileMenuBtn');
  const navLinks = document.getElementById('navLinks');
  mobileMenuBtn.addEventListener('click', () => {
    mobileMenuBtn.classList.toggle('open');
    navLinks.classList.toggle('open');
  });
  navLinks.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', () => {
      mobileMenuBtn.classList.remove('open');
      navLinks.classList.remove('open');
    });
  });

  // Scroll reveal
  const revealElements = document.querySelectorAll('.reveal');
  const revealObserver = new IntersectionObserver((entries) => {
    entries.forEach((entry, i) => {
      if (entry.isIntersecting) {
        setTimeout(() => entry.target.classList.add('visible'), i * 100);
        revealObserver.unobserve(entry.target);
      }
    });
  }, { threshold: 0.1 });
  revealElements.forEach(el => revealObserver.observe(el));
</script>
<script>
  if (window.netlifyIdentity) {
    window.netlifyIdentity.on("init", user => {
      if (!user) { window.netlifyIdentity.on("login", () => { document.location.href = "/admin/"; }); }
    });
  }
</script>
</body>
</html>
